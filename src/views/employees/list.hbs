<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">Employees</h3>

  <div class="d-flex align-items-center gap-2">
    <!-- ✅ Search Form -->
    <form class="d-flex" method="GET" action="/employees">
      <input
        type="text"
        name="q"
        class="form-control"
        placeholder="Search name, email, phone..."
        value="{{q}}"
        style="min-width: 320px;"
      />
      <button class="btn btn-outline-secondary ms-2" type="submit">Search</button>

      {{#if q}}
        <a class="btn btn-outline-danger ms-2" href="/employees">Clear</a>
      {{/if}}
    </form>

    <a class="btn btn-primary" href="/employees/new">Create</a>
  </div>
</div>

<table class="table table-bordered table-hover bg-white">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Designation</th>
      <th>Status</th>
      <th style="width: 240px;">Actions</th>
    </tr>
  </thead>
  <tbody>
    {{#if employees.length}}
      {{#each employees}}
        <tr>
          <td>{{this.id}}</td>
          <td>{{this.fullName}}</td>
          <td>{{this.email}}</td>
          <td>{{this.phone}}</td>
          <td>{{this.designation}}</td>
          <td>
            {{#if (eq this.status "ACTIVE")}}
              <span class="badge bg-success">ACTIVE</span>
            {{else}}
              <span class="badge bg-secondary">INACTIVE</span>
            {{/if}}
          </td>
          <td>
            <a class="btn btn-sm btn-success" href="/employees/{{this.id}}/documents">Upload</a>
            <a class="btn btn-sm btn-info" href="/employees/{{this.id}}">View</a>
            <a class="btn btn-sm btn-warning" href="/employees/{{this.id}}/edit">Edit</a>

            <form action="/employees/{{this.id}}?_method=DELETE" method="POST" class="d-inline"
                  onsubmit="return confirm('Delete this employee?')">
              <button class="btn btn-sm btn-danger" type="submit">Delete</button>
            </form>
          </td>
        </tr>
      {{/each}}
    {{else}}
      <tr>
        <td colspan="7" class="text-center text-muted">No employees found</td>
      </tr>
    {{/if}}
  </tbody>
</table>

{{#if pagination}}
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2 mt-3 p-3 bg-white border rounded-3">
    
    <div class="small text-muted">
      Page <b>{{pagination.from}}</b> - <b>{{pagination.to}}</b> of <b>{{pagination.totalCount}}</b>
      {{!-- <span class="ms-2">| Page <b>{{pagination.page}}</b> of <b>{{pagination.totalPages}}</b></span> --}}
    </div>

    {{#if pagination.show}}
      <nav aria-label="Employees pagination">
        <ul class="pagination pagination-sm mb-0">

          <li class="page-item {{#unless pagination.hasPrev}}disabled{{/unless}}">
            <a class="page-link rounded-pill px-3"
               href="{{#if pagination.hasPrev}}{{pagination.prevUrl}}{{else}}#{{/if}}">
              ← Prev
            </a>
          </li>

          {{#each pagination.pages}}
            <li class="page-item {{#if this.active}}active{{/if}}">
              <a class="page-link rounded-pill px-3 mx-1" href="{{this.url}}">
                {{this.num}}
              </a>
            </li>
          {{/each}}

          <li class="page-item {{#unless pagination.hasNext}}disabled{{/unless}}">
            <a class="page-link rounded-pill px-3"
               href="{{#if pagination.hasNext}}{{pagination.nextUrl}}{{else}}#{{/if}}">
              Next →
            </a>
          </li>

        </ul>
      </nav>
    {{/if}}

  </div>
{{/if}}

